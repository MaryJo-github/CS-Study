# Section 4.1 데이터베이스의 기본

- 데이터베이스(DB, DataBase)
    - 일정한 규칙, 혹은 규약을 통해 구조화되어 저장되는 데이터의 모음
    - 해당 데이터베이스를 제어, 관리하는 통합 시스템 → DBMS(DataBase Management System)
    - DB 안에 있는 데이터들은 특정 DBMS마다 정의된 쿼리 언어(query language)를 통해 삽입, 삭제, 수정, 조회 등 수행 가능
    - 실시간 접근과 동시 공유 가능

## 4.1.1 엔터티(Entity)

- 여러 개의 속성을 지닌 명사 (사람, 장소, 물건, 사건, 개념 등)
- 서비스의 요구 사항에 맞춰 속성이 정해짐(무관한 속성은 취급X)

### 약한 엔터티와 강한 엔터티

- A가 혼자서는 존재하지 못하고 B의 존재 여부에 따라 종속적
→ A: 약한 엔터티, B: 강한 엔터티

## 4.1.1 릴레이션(Relation)

- DB에서 정보를 구분하여 저장하는 기본 단위
- 엔터티에 관한 데이터를 릴레이션 하나에 담아서 관리한다.
- 릴레이션은 관계형 DB에서는 `테이블`이라고하며, NoSQL DB에서는 `컬렉션`이라고 한다.

### 테이블과 컬렉션

- DB는 크게 관계형 데이터베이스와 NoSQL 데이터베이스로 나눌 수 있다.
    - 관계형 대표: MySQL(레코드-테이블-데이터베이스)
    - NoSQL 대표: MonghDB(도큐먼트-컬렉션-데이터베이스)
- 레코드가 쌓여서 테이블, 테이블이 쌓여서 데이터베이스

## 4.1.3 속성(Attribute)

- 릴레이션에서 관리하는 구체적이며 고유한 이름을 갖는 정보
- ex. ‘차’의 속성 - 차 번호, 바퀴수, 차 색깔, 차종 등 
이 중 서비스의 요구 사항을 기반으로 관리해야 할 필요가 있는 속성들만 **엔터티의 속성**이 된다.

## 4.1.4 도메인(Domain)

- 릴레이션에 포함된 각각의 속성들이 가질 수 있는 값의 집합
- ex. 성별(속성) - {남, 여}(값)

## 4.1.5 필드와 레코드

- 회원(엔터티)
member(테이블)
이름, 아이디(속성)
name, ID, address(필드)
행(row) 단위의 데이터 → 레코드(`튜플`이라고도 함)

### 필드 타입

DBMS마다 다르다 (MySQL 기준으로 설명)

- 숫자 타입
- 날짜 타입
    - DATE - 날짜O, 시간X
        - 지원범위 1000-01-01 ~ 9999-12-31
        - 용량 3바이트
    - DATETIME - 날짜O, 시간O
        - 지원범위 1000-01-01 00:00:00 ~ 9999-12-31 23:59:59
        - 용량 8바이트
    - TIMESTAMP - 날짜O, 시간O
        - 지원범위 1970-01-01 00:00:01 ~ 2038-01-19 03:14:07
        - 용량 4바이트
- 문자 타입
    - CHAR와 VARCHAR
        - 몇 자까지 입력할지 미리 정한다.(ex CHAR(30): 최대 30글자)
        - CHAR
            - 테이블을 생성할 때 선언한 길이로 고정
            - 0 ~ 255
            - 레코드를 저장할 때 무조건 선언한 길이 값으로 **고정**해서 저장
        - VARCHAR
            - 가변 길이 문자열
            - 0 ~ 65,535
            - 입력된 데이터에 따라 용량을 가변시켜 저장(ex. VARCHAR(10000)으로 선언해도 10글자의 이메일이면 `그에 해당하는 바이트 + 길이기록용 1바이트` 로 저장
    - TEXT와 BLOB
        - 큰 데이터를 저장할 때 쓰는 타입
        - TEXT
            - 큰 문자열 저장에 쓴다. (게시판 본문 등)
        - BLOB
            - 큰 데이터 저장에 쓴다. (이미지, 동영상 등)
            - 보통은 S3(아마존의 이미지 호스팅 서비스)를 이용하는 등 서버에 파일을 올리고
            파일에 관한 경로를 VARCHAR로 저장
    - ENUM과 SET
        - 문자열을 열거한 타입
        - 공간적 이점
        - 애플리케이션 수정에 따라 데이터베이스의 ENUM이나 SET에 정의한 목록을 수정해야하는 단점
        - ENUM
            - 형태 - ENUM(’x-small’, ‘small’, ‘medium’, ‘large’, ‘x-large’)
            - 이 중 하나만 선택. 단일 선택
            - 리스트에 없는 잘못된 값을 삽입하면 빈 문자열이 대신 삽입된다.
            - 메모리를 적게 사용(x-small 등이 0, 1 등으로 매핑됨)
            - 최대 65,535개의 요소 삽입 가능
        - SET
            - 여러 개의 데이터 선택 가능
            - 비트 단위의 연산 가능
            - 최대 64개의 요소 삽입 가능

## 4.1.6 관계

- 데이터베이스에 여러 개의 테이블이 있고 서로의 관계가 정의되어 있다.
→ 관계화살표로 나타냄

### 1 : 1 관계

- 테이블을 두 개의 테이블로 나눠 테이블의 구조를 더 이해하기 쉽게 만들어준다.
- ex. 한 유저당 유저 이메일 한 개

### 1 : N 관계

- 한 개체가 다른 많은 개체를 포함하는 관계 (0도 포함)
- ex. 한 유저당 여러 개의 상품 장바구니

### N : M 관계

- 테이블 두 개를 직접적으로 연결해서 구축하지 않고
1:N, 1:M 이라는 관계를 갖는 테이블 두 개로 나눠서 설정
- ex. 학생과 강의(학생도 강의를 많이 들을 수 있고, 강의도 여러 명의 학생을 포함할 수 있다.)
    
## 4.1.7 키(Key)

- 테이블 간의 관계를 조금 더 명화하게 하고 테이블 자체의 인덱스를 위해 설정된 장치
- 기본키, 외래키, 후보키, 대체키, 슈퍼키
- 유일성: 중복되는 값 X
- 최소성: 필드를 조합하지 않고 최소 필드만 써서 키 형성 가능

### 기본키(primary key)

- PK, 프라이머리키. 유일성과 최소성을 만족하는 키
- 테이블의 데이터 중 고유하게 존재하는 속성(중복 불가)
- 종류 - 자연키, 인조키
    - 자연키
        - 중복된 값들을 제외하며 중복되지 않는 것이 ‘자연스레’ 뽑다가 나오는 키
        - 언젠가는 변하는 속성을 가진다.
        - ex. 주민등록번호, 이름, 성별 → 이름과 성별은 중복이 있어서 제외 → 주민등록번호만 남음
    - 인조키
        - 고유 식별자를 만들기 위해 인위적으로 생성한 키
        - 변하지 않는다. → 보통 기본키는 인조키로 설정
        - ex. 구별하기 위해 인위적으로 유저 아이디를 부여

### 외래키(foreign key)

- FK. 다른 테이블의 기본키를 그대로 참조하는 값. 개체와의 관계를 식별하는 데 사용
- 중복 가능

### 후보키(candidate key)

- 기본키가 될 수 있는 후보들. 유일성과 최소성을 동시에 만족

### 대체키(alternate key)

- 후보키가 두 개 이상일 경우 어느 하나를 기본키로 지정하고 남은 후보키들

### 슈퍼키(super key)

- 각 레코드를 유일하게 식별할 수 있는 유일성을 갖춘 키
